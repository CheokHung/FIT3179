{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",


    
    "data": {
        "url": "https://raw.githubusercontent.com/CheokHung/FIT3179/master/data/yearly_cleaned_data.csv"
        
    },
    
    "hconcat":[
      {"title": "Historical number of Olympic Medals Won per Country (over 120 Years)",
        "width": 750,
        "height": 500,
        "projection": {"type":"equalEarth"},
        
        "data": {
              "url": "https://raw.githubusercontent.com/CheokHung/FIT3179/master/js/ne_110m_admin_0_countries.topojson",
              "format":{"type": "topojson", "feature": "ne_110m_admin_0_countries"} 
          },
        "transform": [

          
          {
            "lookup": "properties.NAME",
            "from":{
              "data" :{
                "url":"https://raw.githubusercontent.com/CheokHung/FIT3179/master/data/cleaned_data.csv"
              },
              "key":"Country",
              "fields": ["Medal"]
            }
          },
          {"calculate": "datum.Medal + 0.1", "as": "Medals Won"}

        
        ],
        "mark":{"type": "geoshape"},
        "encoding": {
          "color":{
            "field":"Medals Won",
            "type": "quantitative",
            "scale": {"type":"log", "domain":[1,10000]}
          },
          "tooltip":[
            {"field": "properties.NAME", "type": "nominal", "title": "Country"},
            {"field": "Medal", "type": "quantitative"}
          ]
        }
    }
    ,{  

        "title": "Culmulative Number of Medal of Top 5 Countries (Over 120 Years) ",
        "width": 500,
        "height":500,
        "params":[
          {"name": "hover","value":[{"Country":"UK"}],"select":{"type":"point","fields":["Country"],"on" :"mouseover"}}],
        "transform": [
          {"filter":{"field":"Country","oneOf":["United States of America","Russia","Germany","UK","France"]}},
          {"fold": ["Medal","Bronze","Silver","Gold"],"as": ["Type","Count"]}
        ],
        
        "mark":{"type": "line","strokeWidth":5},
        "encoding": {"x": { "field":"Year","type": "ordinal"},        
                    "y":{"field":"cumulative_sum","type": "quantitative"},
                    "color":{"condition":{"param":"hover","field":"Country","type": "nominal"},"value":"grey"
                            }
                    }
          
      
      }
    ],
    "resolve": {"scale": {"color": "independent"}}
  }